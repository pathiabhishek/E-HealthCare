<!DOCTYPE html>
<html>
<% include ../partials/header %>
    <style type="text/css">
        .hidden.menu {
            display: none;
        }

        .masthead.segment {
            min-height: 700px;
            padding: 1em 0em;
        }

        .masthead .logo.item img {
            margin-right: 1em;
        }

        .masthead .ui.menu .ui.button {
            margin-left: 0.5em;
        }

        .masthead h1.ui.header {
            margin-top: 3em;
            margin-bottom: 0em;
            font-size: 4em;
            font-weight: normal;
        }

        .masthead h2 {
            font-size: 1.7em;
            font-weight: normal;
        }

        .ui.vertical.stripe {
            padding: 8em 0em;
        }

        .ui.vertical.stripe h3 {
            font-size: 2em;
        }

        .ui.vertical.stripe .button+h3,
        .ui.vertical.stripe p+h3 {
            margin-top: 3em;
        }

        .ui.vertical.stripe .floated.image {
            clear: both;
        }

        .ui.vertical.stripe p {
            font-size: 1.33em;
        }

        .ui.vertical.stripe .horizontal.divider {
            margin: 3em 0em;
        }

        .quote.stripe.segment {
            padding: 0em;
        }

        .quote.stripe.segment .grid .column {
            padding-top: 5em;
            padding-bottom: 5em;
        }

        .footer.segment {
            padding: 5em 0em;
        }

        .secondary.pointing.menu .toc.item {
            display: none;
        }

        .text-area {
            position: relative;
        }

        .image-content {
            text-align: center;
        }

        .banner-e-health::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
        }

        .nav-area {
            background-color: #1b1c1d !important;
        }

        /* .nav-section {
            padding-top: 0 !important;
        } */

        .profile-header {
            color: #1b1c1d !important;
        }

        .profile-label {
            text-align: left !important;
        }
        .ui.text.container {
            max-width: 500px !important;
        }
        .ui.vertical.segment {
            border-bottom: none;
        }
        .margin-header {
            margin-top: 30px !important;
        }

        .feedback-text {
            font-size: 17px !important;
        }

        .feedback-area {
            margin-bottom: 30px !important;
        }

        @media only screen and (max-width: 700px) {
            .ui.fixed.menu {
                display: none !important;
            }
            .secondary.pointing.menu .item,
            .secondary.pointing.menu .menu {
                display: none;
            }
            .secondary.pointing.menu .toc.item {
                display: block;
            }
            .masthead.segment {
                min-height: 350px;
            }
            .masthead h1.ui.header {
                font-size: 2em;
                margin-top: 1.5em;
            }
            .masthead h2 {
                margin-top: 0.5em;
                font-size: 1.5em;
            }
        }
        /* summary css */

        .summary-card {
            width: 1190px !important;
            text-align: left !important;
            margin-top: 30px !important;
        }

        p.feedback-text {
            width: 800px;
            margin: 0 auto;
        }
    </style>

    <body>

        <!-- Following Menu -->
        <div class="ui large top fixed hidden menu nav-area">
            <div class="ui container text-area">
                <a href="/home" class="item">Home</a>
                <a href="/profile" class="item">Profile</a>
                <a href="/feedback" class="active item">Feedback</a>
                <a class="item">Careers</a>
                <div class="right menu">
                    <div class="item">
                        <a class="ui button loginBtn">Log in</a>
                    </div>
                    <div class="item">
                        <a class="ui primary button signUpBtn">Sign Up</a>
                    </div>
                    <div class="item">
                            <a class="ui primary button logoutBtn">Logout</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar Menu -->
        <div class="ui vertical inverted sidebar menu nav-area">
            <a href="/home" class="item">Home</a>
            <a href="/profile" class="item">Profile</a>
            <a href="/feedback" class="active item">Feedback</a>
            <a class="item">Careers</a>
            <a class="item">Login</a>
            <a class="item">Signup</a>
        </div>

        <!-- Page Contents -->
        <div class="pusher">
            <div class="ui inverted vertical masthead center aligned segment nav-section banner-e-health">
                <div class="nav-area">
                    <div class="ui container text-area">
                        <div class="ui large secondary inverted pointing menu banner-border">
                            <a class="toc item">
                                <i class="sidebar icon"></i>
                            </a>
                            <a href="/home" class="item">Home</a>
                            <% if(isLoggedIn) { %>
                                <a href="/profile" class="item">Profile</a>
                            <% } %>
                            <a href="/feedback" class="active item">Feedback</a>
                            <a class=" item" href="/aboutus">About us</a>
                            <% if(isLoggedIn) { %>
                                <a class=" item" href="/premium">Go Premium</a>
                            <% } %>
                            <div class="right item">
                                <% if(!isLoggedIn) { %>
                                    <a class="ui inverted button loginBtn">Log in</a>
                                    <a class="ui inverted button signUpBtn">Sign Up</a>
                                <% } else { %>
                                    <a href="/logout" class="ui inverted button logoutBtn">Logout</a>
                                <% } %>            
                            </div>  
                        </div>
                    </div>
                </div>
                <div class="segment ui">
                    <h2 class="ui header profile-header margin-header">We believe the heart of healthcare is service to others.</h2>
                    <div class="ui vertical segment text-section container">
                        <p class="feedback-text">Together, we will deliver the promise of medicine. The mission of Johns Hopkins Medicine is to improve the health of the community and the world by setting the standard of excellence in medical education, research and clinical care.</p>
                    </div>
                    <div class="ui raised very padded text container segment feedback-area">
                        <h2 class="ui header">We would like to hear from you!</h2>
                        <div class="ui form">
                            <div class="field">
                            <label class="profile-label">Name</label>
                            <input type="text" name="first-name" placeholder="First Name" id="feedUser">
                            </div>
                            <div class="field">
                            <label class="profile-label">Email ID</label>
                            <input type="text" name="last-name" placeholder="Last Name" id="feedEmail">
                            </div>
                            <div class="field">
                                <label class="profile-label">Contact</label>
                                <input type="text" name="last-name" placeholder="Last Name" id="feedContact">
                            </div>
                            <div class="field">
                                <label class="profile-label">Feedback</label>
                                <textarea class="feed-text-area" id="feedText"></textarea>
                            </div>
                            <button class="ui button" type="button" id="feedSubmit">Submit</button>
                        </div>
                    </div>
                </div>

            </div>
            <% include ../partials/footer %>
        </div>
        </div>
        

        <script>
            $(document).ready(function() {
                $('#feedSubmit').on('click', function() {
                    var name= $('#feedUser').val();
                    var email = $('#feedEmail').val();
                    var contact = $('#feedContact').val();
                    var feed= $('#feedText').val();
                    var emailReg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;

                    var isNameValid = name.length > 5 ? true: false;
                    var isEmailValid = emailReg.test(email);
                    var isContactValid = contact.length == 10 ? true: false;
                    var isFeedValid= feed.length > 10;
                    var isValid;
                    if(isEmailValid && isContactValid && isContactValid && isNameValid) {
                        isValid = true;
                    }
                    else {
                        isValid = false;
                    }
                    var info = {
                        name: name,
                        email: email,
                        contact: contact,
                        feed: feed,
                        isValid: isValid
                    }

                    if(isValid) {
                        $.post("http://localhost:9003/addfeed", {...info}, function(data) {        
                            if(data==='done')           
                            {
                                window.location.href="/feedback";
                            }
                            else {
                                window.location.href="/feedback";
                                alert('unable to post feed');
                            }
                        });
                    }
                    else {
                        (!isContactValid) ? $('#feedContact').closest('.field').addClass('error') : $('#feedContact').closest('.field').removeClass('error');
                        (!isEmailValid) ? $('#feedEmail').closest('.field').addClass('error') : $('#feedEmail').closest('.field').removeClass('error');
                        (!isNameValid) ? $('#feedUser').closest('.field').addClass('error') : $('#feedUser').closest('.field').removeClass('error');
                        (!isFeedValid) ? $('#feedText').closest('.field').addClass('error') : $('#feedText').closest('.field').removeClass('error');                       
                    }
                })
            })
        </script>

    </body>

</html>