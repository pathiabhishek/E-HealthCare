<!DOCTYPE html>
<html>

<head>
    <% include ../partials/header %>
        <style type="text/css">
            .hidden.menu {
                display: none;
            }

            .masthead.segment {
                min-height: 700px;
                padding: 1em 0em;
            }

            .masthead .logo.item img {
                margin-right: 1em;
            }

            .masthead .ui.menu .ui.button {
                margin-left: 0.5em;
            }

            .masthead h2 {
                font-size: 1.7em;
                font-weight: normal;
            }

            .ui.vertical.stripe {
                padding: 8em 0em;
            }

            .ui.vertical.stripe h3 {
                font-size: 2em;
            }

            .ui.vertical.stripe .button+h3,
            .ui.vertical.stripe p+h3 {
                margin-top: 3em;
            }

            .ui.vertical.stripe .floated.image {
                clear: both;
            }

            .ui.vertical.stripe p {
                font-size: 1.33em;
            }

            .ui.vertical.stripe .horizontal.divider {
                margin: 3em 0em;
            }

            .quote.stripe.segment {
                padding: 0em;
            }

            .quote.stripe.segment .grid .column {
                padding-top: 5em;
                padding-bottom: 5em;
            }

            .footer.segment {
                padding: 5em 0em;
            }

            .secondary.pointing.menu .toc.item {
                display: none;
            }

            @media only screen and (max-width: 700px) {
                .ui.fixed.menu {
                    display: none !important;
                }
                .secondary.pointing.menu .item,
                .secondary.pointing.menu .menu {
                    display: none;
                }
                .secondary.pointing.menu .toc.item {
                    display: block;
                }
                .masthead.segment {
                    min-height: 350px;
                }
                .masthead h1.ui.header {
                    font-size: 2em;
                    margin-top: 1.5em;
                }
                .masthead h2 {
                    margin-top: 0.5em;
                    font-size: 1.5em;
                }
            }


            .ui.inverted.segment {
                padding-top: 0;
                padding-bottom: 5px;
            }

            .ui.menu:not(.vertical) .item>.ui.button {
                margin-left: 0.5em;
            }

            .main.ui.container {
                padding-bottom: 5em;
            }

            .ui.segment.doc-list-container {
                cursor: pointer;
                user-select: none;
                -webkit-user-select: none;
            }

            .ui.segment.doc-list-container:hover {
                background: #f9f9f9;
                -webkit-box-shadow: 0 0 5px 5px rgba(34, 36, 38, .15);
                box-shadow: 0 0 5px 2px rgba(34, 36, 38, .15)
            }

            @media only screen and (max-width: 1144px) {
                .masthead.segment {
                    padding-top: 3em;
                }
            }


            .masthead.segment h1 {
                margin-bottom: 1em;
            }

            @media only screen and (min-width: 542px) {
                .doctor-listing-container.item .content .extra {
                    display: flex;
                    display:-webkit-flex;
                    align-items: flex-end;
                }
            }

            @media only screen and (max-width: 700px) {
                .masthead h1.ui.header {
                    margin-top: 0;
                }
            }
            .ui.items>.item .meta .doctor_experience {
                display: block;
                margin-top: .3em;
                color: #aaa;
            }
            .ui.items>.item .meta .about-doc {
                line-height: 1.4;
            }
            .ui.items>.item>.content>.description {
                color: #a1a1a1;
                margin-top: .3em;
            }
            .treatment-container {
                flex: 1;
            }
            .doctor-listing-container .right.primary.button {
                max-height: 35px;
            }
            .treatment-container > .label {
                margin: .25rem .5rem .25rem 0;
            }
            .top-rated__tag {
                outline: 0;
                border: none;
                border-radius: .28571429rem;
                vertical-align: top;
                background: #e0e1e2 none;
                color: rgba(0,0,0,.6);
                font-family: Lato,'Helvetica Neue',Arial,Helvetica,sans-serif;
                margin-left: .4em;
                padding: .3em .7em .4em;
                text-transform: none;
                text-shadow: none;
                font-weight: 700;
                line-height: 1em;
                font-style: normal;
                text-align: center;
                text-decoration: none;
                background-image: none;
                display: inline-block;
                background-color: #00b5ad;
                color: #fff;
                text-shadow: none;
                font-size: 11px !important;
            }

        </style>
</head>

<body>
    <% include ../partials/navbar %>

    <!-- Page Contents -->
    <div class="pusher">
        <div class="ui inverted vertical center aligned segment">
            <% include ../partials/navbarDesktop %>
        </div>
        <div class="ui masthead vertical segment">
            <div class="main ui container">
                <h1 class="ui header">
                    Select Expert
                </h1>

                <div class="ui container">
                    <div class="ui relaxed divided items">
                        <% data.map((doc, index) => { %>
                            <div class="item doctor-listing-container" data-id=<%= doc.did %>>
                                <div class="ui small image">
                                    <img src=<%= doc.imgUrl %>>
                                </div>
                                <div class="content">
                                    <span class="header doc-name"><span><%= doc.name %> </span>
                                        <% if(index < 3) { %>
                                            <span class="top-rated__tag">Top Rated</span>
                                        <% } %>
                                    </span>
                                    <div class="meta">
                                        <span class="about-doc">
                                            <%= doc.education %>
                                        </span>
                                        <span class="doctor_experience">
                                            <%= doc.experience %>
                                            <%= (doc.experience <= 1)? "year" : "years" %>
                                            experience
                                        </span>
                                    </div>
                                    <div class="description">
                                        Currently working in <%= doc.currentWork %>
                                    </div>
                                    <div class="extra">
                                        <div class="treatment-container">
                                            <% var treatments = doc.treatments.split(',') %>
                                            <% treatments.forEach((treatement) => { %>
                                            <div class="ui label treatments"><%= treatement %></div>
                                            <% }) %>
                                        </div>
                                        <div class="ui right primary button ask-question">
                                            Know More
                                            <i class="right chevron icon"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <% }) %>
                    </div>
                </div>
            </div>
        </div>

        <div class="ui inverted vertical footer segment">
            <div class="ui container">
                <div class="ui stackable inverted divided equal height stackable grid">
                    <div class="three wide column">
                        <h4 class="ui inverted header">About</h4>
                        <div class="ui inverted link list">
                            <a href="#" class="item">Sitemap</a>
                            <a href="#" class="item">Contact Us</a>
                            <a href="#" class="item">Religious Ceremonies</a>
                            <a href="#" class="item">Gazebo Plans</a>
                        </div>
                    </div>
                    <div class="three wide column">
                        <h4 class="ui inverted header">Services</h4>
                        <div class="ui inverted link list">
                            <a href="#" class="item">Banana Pre-Order</a>
                            <a href="#" class="item">DNA FAQ</a>
                            <a href="#" class="item">How To Access</a>
                            <a href="#" class="item">Favorite X-Men</a>
                        </div>
                    </div>
                    <div class="seven wide column">
                        <h4 class="ui inverted header">Footer Header</h4>
                        <p>Extra space for a call to action inside the footer that could help re-engage users.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function postUrl(path, params, method) {
            method = method || "post";

            var form = document.createElement("form");

            //Move the submit function to another variable
            //so that it doesn't get overwritten.
            form._submit_ = form.submit;

            form.setAttribute("method", method);
            form.setAttribute("action", path);

            for (var key in params) {
                var hiddenField = document.createElement("input");
                hiddenField.setAttribute("type", "hidden");
                hiddenField.setAttribute("name", key);
                hiddenField.setAttribute("value", params[key]);

                form.appendChild(hiddenField);
            }

            document.body.appendChild(form);
            form._submit_(); //Call the renamed function.
        }
        $(document)
            .ready(function () {

                // fix menu when passed
                $('.masthead')
                    .visibility({
                        once: false,
                        onBottomPassed: function () {
                            $('.fixed.menu').transition('fade in');
                        },
                        onBottomPassedReverse: function () {
                            $('.fixed.menu').transition('fade out');
                        }
                    })
                    ;

                // create sidebar and attach to menu open
                $('.ui.sidebar')
                    .sidebar('attach events', '.toc.item')
                    ;

                $('.ask-question')
                    .on('click', function () {
                        handleClick($(this))
                    })
                $('.doc-name')
                    .on('click', function () {
                        handleClick($(this))
                })

                function handleClick(element) {
                    const id = element.closest('.doctor-listing-container').attr('data-id');
                    postUrl("http://localhost:9003/askQuestion", { id: id });
                }
            })
            ;
    </script>
</body>

</body>

</html>